<!DOCTYPE html>
<html lang="ru" data-theme="light">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Language" content="ru" />
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <meta content="Перевод на русский: Сергей Леонов (aka Leserg)" name="description" />
    <title>Unicode Inno Setup</title>
    <link rel="stylesheet" type="text/css" href="../css/styles.css" />
    <link rel="stylesheet" type="text/css" href="../css/shared.css" />
    <script type="text/javascript" src="../js/topic.js"></script>
    <script type="text/javascript" src="../js/jquery.js"></script>
    <script type="text/javascript" src="../js/highlight.js"></script>
    <script type="text/javascript">
      $(document).ready(function(){highlight();});
    </script>
  </head>
  <body>
    <h1 class="topicheading">Unicode Inno Setup</h1>
    <div class="topicbody">
      <p>До появления Inno Setup 6 существовали две версии Inno
        Setup: ANSI и Unicode. Начиная с Inno Setup 6 в разработке осталась
        только Unicode версия Inno Setup.</p>
      <p>Главными особенностями Unicode версии Inno Setup
        являются поддержка любого языка на любой системе независимо от системной
        кодовой страницы, а также поддержка файлов с именами в кодировке
        Unicode.</p>
      <p>Если вы не знаете, какую версию установили, запустите
        IDE компилятора и посмотрите на заголовок окна. Если после номера версии
        стоит метка "(a)", значит используется ANSI версия Inno Setup. В
        противном случае используется Unicode версия Inno Setup.</p>
      <p>По большей части обе версии используются одинаково и все различия между
        ними отмечены в файле справки. Однако ниже приведены основные различия:</p>
      <ul>
        <li>Unicode версия Inno Setup поддерживает в файлах .iss и .isl
          кодировку UTF-8. Начиная с Inno Setup 6.3 маркер BOM больше не является
          обязательным. Кодировка UTF-16 не поддерживается.</li>
        <li>Все существующие языковые .isl файлы в кодировке ANSI во время
          компиляции автоматически преобразуются с использованием языкового
          параметра <tt>LanguageCodePage</tt>.</li>
        <li>Все записи <tt>[Messages]</tt> и <tt>[CustomMessages]</tt> в
          существующих ANSI .iss сценариях должны быть вручную преобразованы в
          кодировку Unicode, если язык использует особое значение <tt>LanguageCodePage</tt>.
       </li>
        <li>Unicode версия Inno Setup поддерживает в файлах .txt для <tt>LicenseFile</tt>,
          <tt>InfoBeforeFile</tt> и <tt>InfoAfterFile</tt> кодировку UTF-8 и
          UTF-16LE. Начиная с Inno Setup 6.3 маркер BOM больше не является
          обязательным.</li>
        <li>Любой язык простых текстовых файлов в кодировке ANSI для <tt>LicenseFile</tt>,
          <tt>InfoBeforeFile</tt> или <tt>InfoAfterFile</tt> во время
          компиляции автоматически преобразуется с использованием языкового
          параметра <tt>LanguageCodePage</tt>.</li>
        <li>Директива <tt>ShowUndisplayableLanguages</tt> в секции <tt>[Setup]</tt>
          игнорируется Unicode версией Inno Setup.</li>
        <li>Существующие инсталляции ваших программ, выполненные ANSI версией
          программы установки, могут быть легко обновлены Unicode версией
          программы установки и наоборот.</li>
        <li>Примечания к программированию в кодировке Unicode:
          <ul>      <br />
            <li>Компилятор Unicode рассматривает тип "String" как строку
              Unicode, а тип "Char" как символ Unicode. Тип "AnsiString" не
              изменился и по прежнему является строкой ANSI. Тип "PChar" был
              переименован в "PAnsiChar".</li>
            <li>Компилятор Unicode более требовательный в отношении правильного
              использования ";". Недостающие символы ";" считаются ошибкой.</li>
            <li>Изменён прототип некоторых функций: некоторые параметры функций
              <tt>CreateOutputMsgMemoPage</tt>, <tt>RegQueryBinaryValue</tt>, <tt>RegWriteBinaryValue</tt>,
              <tt>OemToCharBuff</tt>, <tt>CharToOemBuff</tt>, <tt>LoadStringFromfile</tt>,
              <tt>SaveStringToFile</tt> и <tt>GetMD5OfString</tt> теперь
              используют тип AnsiString вместо String.</li>
            <li>Добавлена поддержка новых функций <tt>SaveStringsToUTF8File</tt>
              и <tt>GetMD5OfUnicodeString</tt>.</li>
            <li>Добавлен новый тип данных "Int64", который поддерживается
              функцией <tt>IntToStr</tt>. Также добавлены новые функции <tt>StrToInt64</tt>,
              <tt>StrToInt64Def</tt> и <tt>GetSpaceOnDisk64</tt>.</li>
            <li>Добавлен новый класс <tt>TStringStream</tt>.</li>
            <li>Если вы хотите скомпилировать сценарий, в котором используются
              вызовы ANSI версии функций API Windows с помощью Unicode версии
              компилятора, либо обновите вызываемые функции на Unicode версию,
              заменив "A" на "W", либо измените их параметры с типом "String"
              или "PChar" на "AnsiString". Метод с использованием "AnsiString"
              сделает ваш код в секции <tt>[Code]</tt> совместимым с обеими
              версиями компилятора, Unicode и ANSI.</li>
          </ul>
       </li>
      </ul>
      <p>Примечание: Unicode версия Inno Setup может создавать
        только Unicode версии программ установок и, аналогично, ANSI версия Inno
        Setup может создавать только ANSI версии программ установок. Если вы
        хотите создавать программы установок Unicode и ANSI версий на одном
        компьютере, вам необходимо установить обе версии Inno Setup, но в разные
        папки.</p>
    </div>
  <script type="text/javascript" src="../js/theme_selector.js"></script>
  </body>
</html>
