<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <!-- SVG (предпочтительный вариант) -->
  <link rel="icon" href="images/innosetup32.svg" type="image/svg+xml" />
  <!-- PNG (для старых браузеров) -->
  <link rel="icon" href="images/innosetup32.png" type="image/png" />
  <!-- ICO (если нужна поддержка очень старых браузеров) -->
  <link rel="icon" href="images/innosetup32.ico" type="image/x-icon" sizes="any" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/shared.css" />
  <title>Справка Inno Setup 6</title>
  <!-- Стили для фреймов -->
  <style>
    html, body {
      height: 100%;
      margin: 0;
      overflow: hidden;
    }
    .frame-container {
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    .main-content {
      display: flex;
      width: 100%;
      height: 100vh;
    }
    #iframe {
      min-width: 320px;  /* Минимальная ширина */
      max-width: 410px;  /* Максимальная ширина */
      width: 320px;      /* Начальная ширина */
      height: 100%;
    }
    #bodyframe {
      flex: 1;
      height: 100%;
    }
    .resizer {
      width: 3px;
      background: var(--border-color);
      cursor: col-resize;
      height: 100%;
      user-select: none;  /* Чтобы текст не выделялся при перетаскивании */
    }
    #footerframe {
      height: 26px;
      border-top: 1px solid var(--border-color);
      overflow: hidden !important;
      scrollbar-width: none !important; /* Для Firefox */
      -ms-overflow-style: none !important; /* Для IE и Edge */
    }
    #footerframe::-webkit-scrollbar {
      display: none !important; /* Для Chrome, Safari и Opera */
    }
    iframe {
      border: none;
      background: var(--body-bg-color);
    }
    #contentsframe {
      width: 320px;      /* Начальная ширина */
      transition: width 0.3s ease;
    }
  </style>
</head>
<body>
  <!-- Контейнер с фреймами -->
  <div class="frame-container">
    <div class="main-content">
      <!-- Левый фрейм - содержание -->
      <iframe id="contentsframe" name="contentsframe" src="htm/contents.htm"></iframe>
      <!-- Разделитель -->
      <div class="resizer" id="resizer"></div>
      <!-- Основной фрейм - контент -->
      <iframe id="bodyframe" name="bodyframe" src="htm/topic_whatisinnosetup.htm"></iframe>
    </div>
    <!-- Нижний фрейм - футер -->
    <iframe id="footerframe" name="footerframe" src="htm/contents_footer.htm" scrolling="no"></iframe>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const resizer = document.getElementById('resizer');
      const leftFrame = document.getElementById('contentsframe');
      const rightFrame = document.getElementById('bodyframe');
      let isResizing = false;
      const minWidth = 320;
      const maxWidth = 410;

      resizer.addEventListener('mousedown', function(e) {
        isResizing = true;
        document.body.style.cursor = 'col-resize';
        leftFrame.style.userSelect = 'none';
        leftFrame.style.pointerEvents = 'none';
        rightFrame.style.userSelect = 'none';
        rightFrame.style.pointerEvents = 'none';
        document.addEventListener('mousemove', resize);
        document.addEventListener('mouseup', stopResize);
      });

      function resize(e) {
        if (!isResizing) return;
        const containerRect = document.querySelector('.main-content').getBoundingClientRect();
        let newLeftWidth = e.clientX - containerRect.left;
        newLeftWidth = Math.max(minWidth, Math.min(newLeftWidth, maxWidth));
        leftFrame.style.width = newLeftWidth + 'px';
      }

      function stopResize() {
        if (!isResizing) return;
        document.body.style.cursor = '';
        leftFrame.style.userSelect = '';
        leftFrame.style.pointerEvents = '';
        rightFrame.style.userSelect = '';
        rightFrame.style.pointerEvents = '';
        document.removeEventListener('mousemove', resize);
        document.removeEventListener('mouseup', stopResize);
        isResizing = false;
      }

      function toggleContentsFrame() {
        const leftFrame = document.getElementById('contentsframe');
        const isCollapsed = leftFrame.classList.contains('collapsed');

        if (isCollapsed) {
          leftFrame.classList.remove('collapsed');
          leftFrame.style.width = minWidth + 'px';
          document.getElementById('resizer').style.display = 'block';
        } else {
          leftFrame.classList.add('collapsed');
          leftFrame.style.width = '25px';
          document.getElementById('resizer').style.display = 'none';
        }

        localStorage.setItem('frameCollapsed', !isCollapsed);

        leftFrame.contentWindow.postMessage(!isCollapsed ? 'frameCollapsed' : 'frameExpanded', '*');
      }

      if (localStorage.getItem('frameCollapsed') === 'true') {
        const leftFrame = document.getElementById('contentsframe');
        leftFrame.classList.add('collapsed');
        leftFrame.style.width = '25px';
        document.getElementById('resizer').style.display = 'none';
      }

      window.addEventListener('message', function(e) {
        if (e.data === 'toggleContents') {
          toggleContentsFrame();
        }
      });
    });
  </script>
  <script type="text/javascript" src="js/theme_load.js"></script>
</body>
</html>